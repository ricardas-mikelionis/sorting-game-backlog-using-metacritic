(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3775],{640:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login/signup",function(){return a(5569)}])},5569:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSG:function(){return R},default:function(){return w}});var n=a(7568),s=a(414),r=a(5893),i=a(4184),o=a.n(i),c=a(9808),h=a.n(c),d=a(1664),l=a.n(d),p=a(7294),u=a(1163),f=a(2010);function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}var x,b,_="hcaptcha-api-script-id",y="hcaptchaOnLoad",g=new Promise((function(e,t){x=e,b=t})),j=function(e){if(void 0===e&&(e={}),document.getElementById(_))return g;window.hcaptchaOnLoad=x;var t=e.apihost||"https://js.hcaptcha.com";delete e.apihost;var a=document.createElement("script");a.id=_,a.src=t+"/1/api.js?render=explicit&onload="+y,a.async=!0,a.onerror=function(e){return b("script-error")};var n=function(e){return Object.entries(e).filter((function(e){e[0];var t=e[1];return t||!1===t})).map((function(e){var t=e[0],a=e[1];return encodeURIComponent(t)+"="+encodeURIComponent(a)})).join("&")}(e);return a.src+=""!==n?"&"+n:"",document.head.appendChild(a),g},C=function(e){var t,a;function n(t){var a;(a=e.call(this,t)||this).renderCaptcha=a.renderCaptcha.bind(m(a)),a.resetCaptcha=a.resetCaptcha.bind(m(a)),a.removeCaptcha=a.removeCaptcha.bind(m(a)),a.isReady=a.isReady.bind(m(a)),a.loadCaptcha=a.loadCaptcha.bind(m(a)),a.handleOnLoad=a.handleOnLoad.bind(m(a)),a.handleSubmit=a.handleSubmit.bind(m(a)),a.handleExpire=a.handleExpire.bind(m(a)),a.handleError=a.handleError.bind(m(a)),a.handleOpen=a.handleOpen.bind(m(a)),a.handleClose=a.handleClose.bind(m(a)),a.handleChallengeExpired=a.handleChallengeExpired.bind(m(a));var n="undefined"!==typeof hcaptcha;return a.ref=p.createRef(),a.apiScriptRequested=!1,a.state={isApiReady:n,isRemoved:!1,elementId:t.id,captchaId:""},a}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,v(t,a);var s=n.prototype;return s.componentDidMount=function(){this.state.isApiReady?this.renderCaptcha():this.loadCaptcha()},s.componentWillUnmount=function(){var e=this.state.captchaId;this.isReady()&&(hcaptcha.reset(e),hcaptcha.remove(e))},s.shouldComponentUpdate=function(e,t){return this.state.isApiReady===t.isApiReady&&this.state.isRemoved===t.isRemoved},s.componentDidUpdate=function(e){var t=this;["sitekey","size","theme","tabindex","languageOverride","endpoint"].every((function(a){return e[a]===t.props[a]}))||this.removeCaptcha((function(){t.renderCaptcha()}))},s.loadCaptcha=function(){if(!this.apiScriptRequested){var e=this.props,t=e.apihost,a=e.assethost,n=e.endpoint,s=e.host,r=e.imghost,i=e.languageOverride,o=e.reCaptchaCompat,c=e.reportapi,h=e.sentry,d=e.custom;j({apihost:t,assethost:a,endpoint:n,hl:i,host:s,imghost:r,recaptchacompat:!1===o?"off":null,reportapi:c,sentry:h,custom:d}).then(this.handleOnLoad).catch(this.handleError),this.apiScriptRequested=!0}},s.renderCaptcha=function(e){if(this.state.isApiReady){var t=Object.assign({"open-callback":this.handleOpen,"close-callback":this.handleClose,"error-callback":this.handleError,"chalexpired-callback":this.handleChallengeExpired,"expired-callback":this.handleExpire,callback:this.handleSubmit},this.props,{hl:this.props.hl||this.props.languageOverride,languageOverride:void 0}),a=hcaptcha.render(this.ref.current,t);this.setState({isRemoved:!1,captchaId:a},(function(){e&&e()}))}},s.resetCaptcha=function(){var e=this.state.captchaId;this.isReady()&&hcaptcha.reset(e)},s.removeCaptcha=function(e){var t=this.state.captchaId;this.isReady()&&this.setState({isRemoved:!0},(function(){hcaptcha.remove(t),e&&e()}))},s.handleOnLoad=function(){var e=this;this.setState({isApiReady:!0},(function(){e.renderCaptcha((function(){var t=e.props.onLoad;t&&t()}))}))},s.handleSubmit=function(e){var t=this.props.onVerify,a=this.state,n=a.isRemoved,s=a.captchaId;"undefined"===typeof hcaptcha||n||t(hcaptcha.getResponse(s),hcaptcha.getRespKey(s))},s.handleExpire=function(){var e=this.props.onExpire,t=this.state.captchaId;this.isReady()&&(hcaptcha.reset(t),e&&e())},s.handleError=function(e){var t=this.props.onError,a=this.state.captchaId;this.isReady()&&hcaptcha.reset(a),t&&t(e)},s.isReady=function(){var e=this.state,t=e.isApiReady,a=e.isRemoved;return t&&!a},s.handleOpen=function(){this.isReady()&&this.props.onOpen&&this.props.onOpen()},s.handleClose=function(){this.isReady()&&this.props.onClose&&this.props.onClose()},s.handleChallengeExpired=function(){this.isReady()&&this.props.onChalExpired&&this.props.onChalExpired()},s.execute=function(e){void 0===e&&(e=null);var t=this.state.captchaId;if(this.isReady())return e&&"object"!==typeof e&&(e=null),hcaptcha.execute(t,e)},s.setData=function(e){var t=this.state.captchaId;this.isReady()&&(e&&"object"!==typeof e&&(e=null),hcaptcha.setData(t,e))},s.getResponse=function(){return hcaptcha.getResponse(this.state.captchaId)},s.getRespKey=function(){return hcaptcha.getRespKey(this.state.captchaId)},s.render=function(){var e=this.state.elementId;return p.createElement("div",{ref:this.ref,id:e})},n}(p.Component);var R=!0,w=function(){var e=(0,u.useRouter)(),t=(0,f.F)().theme,a=(0,p.useState)(""),i=a[0],c=a[1],d=(0,p.useState)(""),m=d[0],v=d[1],x=(0,p.useState)(""),b=x[0],_=x[1],y=(0,p.useState)(""),g=y[0],j=y[1],R=(0,p.useState)(""),w=R[0],N=R[1],E=(0,p.useState)(null),O=E[0],k=E[1],S=(0,p.useRef)(null);function I(){return P.apply(this,arguments)}function P(){return(P=(0,n.Z)((function(){var t;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return[4,fetch("/api/signup",{method:"POST",body:JSON.stringify({email:i,userName:m,password:b,token:O}),headers:{"Content-Type":"application/json"}})];case 1:return[4,a.sent().json()];case 2:return(t=a.sent()).error?N(t.error):e.push("/user/".concat(m)),[2]}}))}))).apply(this,arguments)}(0,p.useEffect)((function(){O&&console.log("hCaptcha Token: ".concat(O))}),[O]),(0,p.useEffect)((function(){w&&S.current.resetCaptcha()}),[w]);var U=function(){var e=(0,n.Z)((function(e){return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return e.preventDefault(),i?m?b?b!==g?(N("Your passwords do not match."),[2]):[4,I()]:(N("Password cannot be empty."),[2]):(N("Username cannot be empty."),[2]):(N("Email cannot be empty."),[2]);case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:o()("contain_out","back_blue"),children:(0,r.jsx)("div",{className:o()("contain_in"),children:(0,r.jsx)("div",{className:o()(h().login_header,"center"),children:(0,r.jsx)("h1",{children:"Member Signup"})})})}),(0,r.jsx)("div",{className:"contain_out",children:(0,r.jsxs)("div",{className:"contain_in",children:[(0,r.jsx)("div",{className:"content_25"}),(0,r.jsxs)("div",{className:"content_50",children:[w?(0,r.jsx)("div",{className:"head_padding back_red shadow_box center",children:w}):null,(0,r.jsx)("div",{className:"in back_primary shadow_box",children:(0,r.jsx)("form",{className:h().login_form,method:"post",action:"signup",onSubmit:U,children:(0,r.jsx)("table",{children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:h().login_title,children:(0,r.jsx)("label",{htmlFor:"email",children:"Email"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{id:"email",name:"email",className:o()("form_text","back_form"),placeholder:"Email",autoFocus:"autofocus",autoComplete:"off",type:"text",value:i,onChange:function(e){return c(e.target.value.trim().toLowerCase())}})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:h().login_title,children:(0,r.jsx)("label",{htmlFor:"username",children:"Username"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{id:"username",name:"username",className:o()("form_text","back_form"),placeholder:"Username",type:"text",autoComplete:"off",value:m,onChange:function(e){return v(e.target.value.trim())}})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:h().login_title,children:(0,r.jsx)("label",{htmlFor:"password",children:"Password"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{id:"password",name:"password",placeholder:"Password",className:"form_text back_form",type:"password",autoComplete:"new-password",value:b,onChange:function(e){return _(e.target.value)}})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:h().login_title,children:(0,r.jsx)("label",{htmlFor:"passwordRepeat",children:"Verify Password"})}),(0,r.jsxs)("td",{children:[(0,r.jsx)("input",{id:"passwordRepeat",name:"passwordRepeat",placeholder:"Verify Password",className:"form_text back_form",type:"password",autoComplete:"new-password",value:g,onChange:function(e){return j(e.target.value)}}),(0,r.jsxs)("i",{className:"text_grey center",style:{fontSize:"80%"},children:["Password will be encrypted. See our full ",(0,r.jsx)(l(),{href:"/privacy",children:"privacy policy"}),"."]})]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"center",children:[(0,r.jsx)("input",{type:"submit",className:"form_button back_blue",value:"Create"}),(0,r.jsx)(l(),{href:"/login",children:"Cancel"})]}),(0,r.jsx)("td",{children:(0,r.jsx)(C,{sitekey:"8b78699e-e0b2-4e34-8f10-c6338ba1b6dd",onVerify:k,size:"compact",ref:S,theme:"dark"===t?t:"light"})})]})]})})})})]}),(0,r.jsx)("div",{className:"content_25"}),(0,r.jsx)("div",{className:"clear"}),(0,r.jsx)("div",{className:"content_break"})]})})]})}},9808:function(e){e.exports={login_header:"login_login_header__RRKUp",login_form:"login_login_form__yQAGz",login_title:"login_login_title__j0xDp"}}},function(e){e.O(0,[9774,2888,179],(function(){return t=640,e(e.s=t);var t}));var t=e.O();_N_E=t}]);